@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --chat-bg: #f5f5f5;
  --bubble-incoming-bg: #f1f1f1;
  --bubble-incoming-color: #000;
  --bubble-outgoing-bg: #4fa3f7;
  --bubble-outgoing-color: #fff;
  --timestamp-color: rgba(0,0,0,0.45);
  --date-pill-bg: #e0e0e0;
  --date-pill-color: #555;
}

.dark {
  --chat-bg: #1f1f1f;
  --bubble-incoming-bg: #2A2F32;
  --bubble-incoming-color: #e0e0e0;
  --bubble-outgoing-bg: #4fa3f7;
  --bubble-outgoing-color: #fff;
  --timestamp-color: rgba(255,255,255,0.55);
  --date-pill-bg: #3a3a3a;
  --date-pill-color: #ddd;
}

@layer base {
  html {
    @apply h-full;
  }
  body {
    @apply h-full antialiased;
    background: var(--chat-bg);
    color: var(--bubble-incoming-color);
  }
  #root {
    @apply h-full;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none;
  }
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700;
  }
  .btn-secondary {
    @apply bg-secondary-200 text-secondary-900 hover:bg-secondary-300 dark:bg-secondary-700 dark:text-secondary-100 dark:hover:bg-secondary-600;
  }
  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700;
  }
  .input {
    @apply block w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-100 dark:placeholder-gray-300;
  }
  .card {
    @apply rounded-lg bg-white shadow dark:bg-gray-700;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100;
}

.dark ::-webkit-scrollbar-track {
  @apply bg-gray-700;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded hover:bg-gray-400;
}

.dark ::-webkit-scrollbar-thumb {
  @apply bg-gray-600 rounded hover:bg-gray-500;
}

/* Chat layout */
.chat-shell {
  @apply flex flex-col h-full;
  background: var(--chat-bg);
}

.chat-scroll {
  @apply flex-1 overflow-y-auto overflow-x-hidden;
}

.chat-column {
  @apply w-full mx-auto;
  max-width: 720px;
  padding: 16px;
}

/* Message styles */
.message-row {
  @apply flex w-full;
}

.message-row.incoming {
  @apply justify-start;
}

.message-row.outgoing {
  @apply justify-end;
}

.bubble {
  @apply relative break-words whitespace-pre-line shadow;
  max-width: 75%;
  padding: 8px 12px 14px 12px;
}

.bubble.incoming {
  background: var(--bubble-incoming-bg);
  color: var(--bubble-incoming-color);
  border-radius: 18px 18px 18px 6px;
}

.bubble.outgoing {
  background: var(--bubble-outgoing-bg);
  color: var(--bubble-outgoing-color);
  border-radius: 18px 18px 6px 18px;
}

.bubble .meta {
  position: absolute;
  right: 8px;
  bottom: 4px;
  font-size: 10px;
  opacity: 0.7;
  color: var(--timestamp-color);
}

/* Date separator */
.date-separator {
  @apply flex justify-center my-3 text-xs;
}

.date-separator span {
  background: var(--date-pill-bg);
  color: var(--date-pill-color);
  padding: 2px 8px;
  border-radius: 9999px;
}

/* Typing indicator animation */
.typing-indicator span {
  @apply inline-block w-2 h-2 rounded-full bg-gray-500 mx-0.5;
  animation: bounce 1.4s infinite ease-in-out both;
}

.typing-indicator span:nth-child(1) {
  animation-delay: -0.32s;
}

.typing-indicator span:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes bounce {
  0%, 80%, 100% {
    transform: scale(0);
  } 40% {
    transform: scale(1);
  }
}

/* Modal animations */
@keyframes modal-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes modal-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.modal-fade-in {
  animation: modal-fade-in 0.2s ease-out;
}

.modal-scale-in {
  animation: modal-scale-in 0.2s ease-out;
}